\doxysection{src/active\+\_\+object.c File Reference}
\hypertarget{active__object_8c}{}\label{active__object_8c}\index{src/active\_object.c@{src/active\_object.c}}


Implements the Active Object pattern for message-\/driven execution.  


{\ttfamily \#include $<$broker.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include "{}active\+\_\+object.\+h"{}}\newline
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{active__object_8c_a6361075360e46a741202fe5c4b8901c6}\label{active__object_8c_a6361075360e46a741202fe5c4b8901c6} 
\mbox{\hyperlink{structsys__id__t}{sys\+\_\+id\+\_\+t}} \mbox{\hyperlink{active__object_8h_a45cbff3c85781f76fe31df77581a3824}{system\+\_\+id}} {\bfseries \+\_\+\+\_\+attribute\+\_\+\+\_\+} ((section("{}.sys\+\_\+id\+\_\+section"{})))
\begin{DoxyCompactList}\small\item\em System ID defined in the linker script for embedded platforms. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{active__object_8c_a41dbcd46393eb2a6618ea974b3f926dc}{get\+\_\+time\+\_\+ms}} (void)
\begin{DoxyCompactList}\small\item\em Gets the current system time in milliseconds. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{active__object_8c_a7cf400255ee0a4c9d0edd6f43896540d}{start}} (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const me)
\begin{DoxyCompactList}\small\item\em Starts the Active Object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{active__object_8c_abcc568f66a77cf2dc0cb3192a66503bf}{stop}} (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const me)
\begin{DoxyCompactList}\small\item\em Stops the Active Object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{active__object_8c_ad899678bdc83ea48740722b90d5cc42c}{post}} (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const me, const \mbox{\hyperlink{structmessage__frame__t}{message\+\_\+frame\+\_\+t}} frame)
\begin{DoxyCompactList}\small\item\em Posts a message to the Active Object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{active__object_8c_a8eb9cd4d643dd84ad2e46681885b6320}{logger}} (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const me, const uint8\+\_\+t \texorpdfstring{$\ast$}{*}data, uint16\+\_\+t length)
\begin{DoxyCompactList}\small\item\em Logs a message. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{active__object_8c_a315c2e3300e0f5228323f124986cd139}{ao\+\_\+ctor}} (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const me, \mbox{\hyperlink{active__object_8h_acf503bbd3e9a97c6f2753e916c71b076}{broker\+\_\+t}} \texorpdfstring{$\ast$}{*}\mbox{\hyperlink{structbroker}{broker}}, char \texorpdfstring{$\ast$}{*}name)
\begin{DoxyCompactList}\small\item\em Constructs an Active Object. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{active__object_8c_a2f0d7ad21b106241182fcb1824cda99d}{register\+\_\+active\+\_\+object}} (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}me)
\begin{DoxyCompactList}\small\item\em Registers an {\ttfamily Active\+Object} in the system registry. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{active__object_8c_af85b0d5d2f6c72f0bb35680400161277}{unregister\+\_\+active\+\_\+object}} (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}me)
\begin{DoxyCompactList}\small\item\em Unregisters an {\ttfamily Active\+Object} from the system registry. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{active__object_8c_adb2e90ee62e04d64222fb9d92b68425a}{active\+\_\+objects}} \mbox{[}\mbox{\hyperlink{active__object_8h_a699db742ab46a26bb83b45472601c812}{MAX\+\_\+\+ACTIVE\+\_\+\+OBJECTS}}\mbox{]} = \{ 0 \}
\begin{DoxyCompactList}\small\item\em List of all registered active objects. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{active__object_8c_a27617dac518332ca9befb10109cc9f73}{active\+\_\+object\+\_\+count}} = 0
\begin{DoxyCompactList}\small\item\em Count of registered active objects. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Implements the Active Object pattern for message-\/driven execution. 

This file provides functions for managing Active Objects, including initialization, message queue handling, dispatching, logging, and integration with different operating systems (Windows \& Free\+RTOS).

\begin{DoxyAuthor}{Author}
Nathan Ikolo 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
February 10, 2025 
\end{DoxyDate}


Definition in file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.



\doxysubsection{Function Documentation}
\Hypertarget{active__object_8c_a315c2e3300e0f5228323f124986cd139}\index{active\_object.c@{active\_object.c}!ao\_ctor@{ao\_ctor}}
\index{ao\_ctor@{ao\_ctor}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{ao\_ctor()}{ao\_ctor()}}
{\footnotesize\ttfamily \label{active__object_8c_a315c2e3300e0f5228323f124986cd139} 
void ao\+\_\+ctor (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const}]{me}{, }\item[{\mbox{\hyperlink{active__object_8h_acf503bbd3e9a97c6f2753e916c71b076}{broker\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{broker}{, }\item[{char \texorpdfstring{$\ast$}{*}}]{name}{}\end{DoxyParamCaption})}



Constructs an Active Object. 

Initializes the object, assigns the vtable, and sets the object name.


\begin{DoxyParams}{Parameters}
{\em me} & Pointer to Active Object instance. \\
\hline
{\em broker} & Pointer to event broker. \\
\hline
{\em name} & Name of the Active Object. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{active__object_8c_source_l00251}{251}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

\Hypertarget{active__object_8c_a41dbcd46393eb2a6618ea974b3f926dc}\index{active\_object.c@{active\_object.c}!get\_time\_ms@{get\_time\_ms}}
\index{get\_time\_ms@{get\_time\_ms}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{get\_time\_ms()}{get\_time\_ms()}}
{\footnotesize\ttfamily \label{active__object_8c_a41dbcd46393eb2a6618ea974b3f926dc} 
uint32\+\_\+t get\+\_\+time\+\_\+ms (\begin{DoxyParamCaption}\item[{void}]{}{}\end{DoxyParamCaption})}



Gets the current system time in milliseconds. 

Retrieves the current system time in milliseconds.

\begin{DoxyReturn}{Returns}
The current time in milliseconds. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{active__object_8c_source_l00102}{102}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

\Hypertarget{active__object_8c_a8eb9cd4d643dd84ad2e46681885b6320}\index{active\_object.c@{active\_object.c}!logger@{logger}}
\index{logger@{logger}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{logger()}{logger()}}
{\footnotesize\ttfamily \label{active__object_8c_a8eb9cd4d643dd84ad2e46681885b6320} 
void logger (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const}]{me}{, }\item[{const uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{data}{, }\item[{uint16\+\_\+t}]{length}{}\end{DoxyParamCaption})}



Logs a message. 

This function formats and logs messages in hex format.


\begin{DoxyParams}{Parameters}
{\em me} & Pointer to the Active Object instance. \\
\hline
{\em data} & Pointer to the byte array message. \\
\hline
{\em length} & Length of {\ttfamily data} in bytes. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{active__object_8c_source_l00220}{220}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

\Hypertarget{active__object_8c_ad899678bdc83ea48740722b90d5cc42c}\index{active\_object.c@{active\_object.c}!post@{post}}
\index{post@{post}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{post()}{post()}}
{\footnotesize\ttfamily \label{active__object_8c_ad899678bdc83ea48740722b90d5cc42c} 
void post (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const}]{me}{, }\item[{const \mbox{\hyperlink{structmessage__frame__t}{message\+\_\+frame\+\_\+t}}}]{frame}{}\end{DoxyParamCaption})}



Posts a message to the Active Object. 

This function adds a message to the object\textquotesingle{}s queue for later processing.


\begin{DoxyParams}{Parameters}
{\em me} & Pointer to the Active Object instance. \\
\hline
{\em frame} & The message frame to be added to the queue. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{active__object_8c_source_l00191}{191}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

\Hypertarget{active__object_8c_a2f0d7ad21b106241182fcb1824cda99d}\index{active\_object.c@{active\_object.c}!register\_active\_object@{register\_active\_object}}
\index{register\_active\_object@{register\_active\_object}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{register\_active\_object()}{register\_active\_object()}}
{\footnotesize\ttfamily \label{active__object_8c_a2f0d7ad21b106241182fcb1824cda99d} 
void register\+\_\+active\+\_\+object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{me}{}\end{DoxyParamCaption})}



Registers an {\ttfamily Active\+Object} in the system registry. 

This function adds an active object instance to the global registry. It ensures that the object is trackable by the watchdog system and other monitoring components.


\begin{DoxyParams}{Parameters}
{\em me} & Pointer to the {\ttfamily Active\+Object} instance to be registered. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function should be called within {\ttfamily \doxylink{active__object_8c_a7cf400255ee0a4c9d0edd6f43896540d}{start()}} to ensure all objects are properly tracked. 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{active__object_8c_source_l00275}{275}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

\Hypertarget{active__object_8c_a7cf400255ee0a4c9d0edd6f43896540d}\index{active\_object.c@{active\_object.c}!start@{start}}
\index{start@{start}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily \label{active__object_8c_a7cf400255ee0a4c9d0edd6f43896540d} 
void start (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const}]{me}{}\end{DoxyParamCaption})}



Starts the Active Object. 

This function initializes the message queue and creates a thread/task to handle incoming events.


\begin{DoxyParams}{Parameters}
{\em me} & Pointer to the Active Object instance. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{active__object_8c_source_l00128}{128}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

\Hypertarget{active__object_8c_abcc568f66a77cf2dc0cb3192a66503bf}\index{active\_object.c@{active\_object.c}!stop@{stop}}
\index{stop@{stop}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily \label{active__object_8c_abcc568f66a77cf2dc0cb3192a66503bf} 
void stop (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}const}]{me}{}\end{DoxyParamCaption})}



Stops the Active Object. 

Cleans up message queues, deletes threads/tasks, and releases resources.


\begin{DoxyParams}{Parameters}
{\em me} & Pointer to the Active Object instance. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{active__object_8c_source_l00161}{161}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

\Hypertarget{active__object_8c_af85b0d5d2f6c72f0bb35680400161277}\index{active\_object.c@{active\_object.c}!unregister\_active\_object@{unregister\_active\_object}}
\index{unregister\_active\_object@{unregister\_active\_object}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{unregister\_active\_object()}{unregister\_active\_object()}}
{\footnotesize\ttfamily \label{active__object_8c_af85b0d5d2f6c72f0bb35680400161277} 
void unregister\+\_\+active\+\_\+object (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{me}{}\end{DoxyParamCaption})}



Unregisters an {\ttfamily Active\+Object} from the system registry. 

This function removes an {\ttfamily Active\+Object} from the global registry when it is stopped. It ensures that the watchdog system no longer tracks the object, preventing false alerts about inactive objects.


\begin{DoxyParams}{Parameters}
{\em me} & Pointer to the {\ttfamily Active\+Object} instance to be unregistered. \\
\hline
\end{DoxyParams}
\begin{DoxyNote}{Note}
This function should be called within {\ttfamily \doxylink{active__object_8c_abcc568f66a77cf2dc0cb3192a66503bf}{stop()}} to maintain an accurate object registry. 
\end{DoxyNote}


Definition at line \mbox{\hyperlink{active__object_8c_source_l00296}{296}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.



\doxysubsection{Variable Documentation}
\Hypertarget{active__object_8c_a27617dac518332ca9befb10109cc9f73}\index{active\_object.c@{active\_object.c}!active\_object\_count@{active\_object\_count}}
\index{active\_object\_count@{active\_object\_count}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{active\_object\_count}{active\_object\_count}}
{\footnotesize\ttfamily \label{active__object_8c_a27617dac518332ca9befb10109cc9f73} 
int active\+\_\+object\+\_\+count = 0}



Count of registered active objects. 

The number of active objects currently in the system. 

Definition at line \mbox{\hyperlink{active__object_8c_source_l00037}{37}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

\Hypertarget{active__object_8c_adb2e90ee62e04d64222fb9d92b68425a}\index{active\_object.c@{active\_object.c}!active\_objects@{active\_objects}}
\index{active\_objects@{active\_objects}!active\_object.c@{active\_object.c}}
\doxysubsubsection{\texorpdfstring{active\_objects}{active\_objects}}
{\footnotesize\ttfamily \label{active__object_8c_adb2e90ee62e04d64222fb9d92b68425a} 
\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\+\_\+obj\+\_\+t}}\texorpdfstring{$\ast$}{*} active\+\_\+objects\mbox{[}\mbox{\hyperlink{active__object_8h_a699db742ab46a26bb83b45472601c812}{MAX\+\_\+\+ACTIVE\+\_\+\+OBJECTS}}\mbox{]} = \{ 0 \}}



List of all registered active objects. 

Global registry for tracking active objects. 

Definition at line \mbox{\hyperlink{active__object_8c_source_l00035}{35}} of file \mbox{\hyperlink{active__object_8c_source}{active\+\_\+object.\+c}}.

