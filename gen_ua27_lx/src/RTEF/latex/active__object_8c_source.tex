\doxysection{active\+\_\+object.\+c}
\hypertarget{active__object_8c_source}{}\label{active__object_8c_source}\index{src/active\_object.c@{src/active\_object.c}}
\mbox{\hyperlink{active__object_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00001}00001\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00013}00013\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{broker_8h}{broker.h}}>}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00014}00014\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00015}00015\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{active__object_8h}{active\_object.h}}"{}}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00016}00016\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00017}00017\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00018}00018\ \textcolor{keyword}{extern}\ \textcolor{stringliteral}{"{}C"{}}\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00019}00019\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00021}00021\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00022}00022\ \textcolor{preprocessor}{\#include\ <stdio.h>}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00025}00025\ \mbox{\hyperlink{structsys__id__t}{sys\_id\_t}}\ \mbox{\hyperlink{active__object_8h_a45cbff3c85781f76fe31df77581a3824}{system\_id}}\ =\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00026}00026\ \ \ \ \ .value\ =\ 0x07,}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00027}00027\ \ \ \ \ .is\_set\ =\ 1}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00028}00028\ \};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00029}00029\ \textcolor{preprocessor}{\#else}\textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00031}\mbox{\hyperlink{active__object_8c_a6361075360e46a741202fe5c4b8901c6}{00031}}\ \mbox{\hyperlink{structsys__id__t}{sys\_id\_t}}\ \mbox{\hyperlink{active__object_8h_a45cbff3c85781f76fe31df77581a3824}{system\_id}}\ \mbox{\hyperlink{active__object_8c_a6361075360e46a741202fe5c4b8901c6}{\_\_attribute\_\_}}\ ((section(\textcolor{stringliteral}{"{}.sys\_id\_section"{}})));\ \textcolor{comment}{/*\ Defined\ in\ linker\ script\ */}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00032}00032\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00035}\mbox{\hyperlink{active__object_8h_adb2e90ee62e04d64222fb9d92b68425a}{00035}}\ \mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *\mbox{\hyperlink{active__object_8h_adb2e90ee62e04d64222fb9d92b68425a}{active\_objects}}[\mbox{\hyperlink{active__object_8h_a699db742ab46a26bb83b45472601c812}{MAX\_ACTIVE\_OBJECTS}}]\ =\ \{\ 0\ \};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00037}\mbox{\hyperlink{active__object_8h_a27617dac518332ca9befb10109cc9f73}{00037}}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{active__object_8h_a27617dac518332ca9befb10109cc9f73}{active\_object\_count}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00038}00038\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00039}00039\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00040}00040\ \textcolor{preprocessor}{\ \ \ \ \#include\ <windows.h>}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00041}00041\ \textcolor{preprocessor}{\ \ \ \ \#include\ <process.h>}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00042}00042\ \textcolor{preprocessor}{\ \ \ \ \#include\ <synchapi.h>}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00043}00043\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00044}00044\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \_\_stdcall\ event\_loop(\textcolor{keywordtype}{void}\ *vparam);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00046}00046\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00051}00051\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ MsgQueue\_Init(MsgQueue\_t\ *q)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00052}00052\ \ \ \ \ InitializeCriticalSection(\&q-\/>lock);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00053}00053\ \ \ \ \ InitializeConditionVariable(\&q-\/>cond);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00054}00054\ \ \ \ \ q-\/>head\ =\ 0;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00055}00055\ \ \ \ \ q-\/>tail\ =\ 0;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00056}00056\ \ \ \ \ q-\/>count\ =\ 0;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00057}00057\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00058}00058\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00064}00064\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ MsgQueue\_Push(MsgQueue\_t\ *q,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmessage__frame__t}{message\_frame\_t}}\ *frame)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00065}00065\ \ \ \ \ EnterCriticalSection(\&q-\/>lock);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00066}00066\ \ \ \ \ \textcolor{keywordflow}{if}\ (q-\/>count\ <\ \mbox{\hyperlink{active__object_8h_ad8bd949ab6075e4abac233765afc738f}{AO\_QUEUE\_SIZE}})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00067}00067\ \ \ \ \ \ \ \ \ q-\/>buffer[q-\/>tail]\ =\ *frame;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00068}00068\ \ \ \ \ \ \ \ \ q-\/>tail\ =\ (q-\/>tail\ +\ 1)\ \%\ \mbox{\hyperlink{active__object_8h_ad8bd949ab6075e4abac233765afc738f}{AO\_QUEUE\_SIZE}};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00069}00069\ \ \ \ \ \ \ \ \ q-\/>count++;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00070}00070\ \ \ \ \ \ \ \ \ WakeConditionVariable(\&q-\/>cond);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00071}00071\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00072}00072\ \ \ \ \ LeaveCriticalSection(\&q-\/>lock);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00073}00073\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00081}00081\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ MsgQueue\_Pop(MsgQueue\_t\ *q,\ \mbox{\hyperlink{structmessage__frame__t}{message\_frame\_t}}\ *frame)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00082}00082\ \ \ \ \ \textcolor{keywordtype}{int}\ success\ =\ 0;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00083}00083\ \ \ \ \ EnterCriticalSection(\&q-\/>lock);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00084}00084\ \ \ \ \ \textcolor{keywordflow}{while}\ (q-\/>count\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00085}00085\ \ \ \ \ \ \ \ \ SleepConditionVariableCS(\&q-\/>cond,\ \&q-\/>lock,\ INFINITE);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00086}00086\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00087}00087\ \ \ \ \ \textcolor{keywordflow}{if}\ (q-\/>count\ >\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00088}00088\ \ \ \ \ \ \ \ \ *frame\ =\ q-\/>buffer[q-\/>head];}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00089}00089\ \ \ \ \ \ \ \ \ q-\/>head\ =\ (q-\/>head\ +\ 1)\ \%\ \mbox{\hyperlink{active__object_8h_ad8bd949ab6075e4abac233765afc738f}{AO\_QUEUE\_SIZE}};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00090}00090\ \ \ \ \ \ \ \ \ q-\/>count-\/-\/;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00091}00091\ \ \ \ \ \ \ \ \ success\ =\ 1;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00092}00092\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00093}00093\ \ \ \ \ LeaveCriticalSection(\&q-\/>lock);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00094}00094\ \ \ \ \ \textcolor{keywordflow}{return}\ success;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00095}00095\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00096}00096\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00102}\mbox{\hyperlink{active__object_8h_a41dbcd46393eb2a6618ea974b3f926dc}{00102}}\ uint32\_t\ \mbox{\hyperlink{active__object_8c_a41dbcd46393eb2a6618ea974b3f926dc}{get\_time\_ms}}(\textcolor{keywordtype}{void})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00103}00103\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00104}00104\ \ \ \ \ LARGE\_INTEGER\ freq,\ counter;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00105}00105\ \ \ \ \ QueryPerformanceFrequency(\&freq);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00106}00106\ \ \ \ \ QueryPerformanceCounter(\&counter);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00107}00107\ \ \ \ \ \textcolor{keywordflow}{return}\ (uint32\_t)((double)counter.QuadPart\ *\ 1000.0\ /\ freq.QuadPart);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00108}00108\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00109}00109\ \ \ \ \ \textcolor{keywordflow}{return}\ (uint32\_t)\ (xTaskGetTickCount()\ *\ portTICK\_PERIOD\_MS);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00110}00110\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00111}00111\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00112}00112\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00113}00113\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00114}00114\ \textcolor{keywordtype}{unsigned}\ \_\_stdcall\ event\_loop(\textcolor{keywordtype}{void}\ *vparam);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00115}00115\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00116}00116\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ event\_loop(\textcolor{keywordtype}{void}\ *vparam);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00117}00117\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00118}00118\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00128}\mbox{\hyperlink{active__object_8h_a7cf400255ee0a4c9d0edd6f43896540d}{00128}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{active__object_8c_a7cf400255ee0a4c9d0edd6f43896540d}{start}}(\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *\textcolor{keyword}{const}\ me)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00129}00129\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00130}00130\ \ \ \ \ \textcolor{keywordflow}{if}(me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}}\ ==\ NULL)\{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00131}00131\ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}}\ =\ (HANDLE)\_beginthreadex(NULL,\ 0,\ event\_loop,\ me,\ 0,\ NULL);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00132}00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00133}00133\ \ \ \ \ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_aa3ebd5d2169a91522a0692689b8bacf7}{log}}(me,\ (\textcolor{keyword}{const}\ uint8\_t*)\ \textcolor{stringliteral}{"{}ActiveObject\ started\ (Windows)."{}},\ \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"{}ActiveObject\ started\ (Windows)."{}}));}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00134}00134\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{active__object_8c_a2f0d7ad21b106241182fcb1824cda99d}{register\_active\_object}}(me);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00135}00135\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{fsm_8h_ab8e7b0b29808e166841510b1b92759d7}{fsm\_init}}(\&me-\/>\mbox{\hyperlink{structbase__obj_a95c9ad9a4bace3f923fec123c2ddd5d9}{fsm}},\ me-\/>\mbox{\hyperlink{structbase__obj_a9be6e5364e6fecb537346682b5bdae3d}{initialisation\_state}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00136}00136\ \ \ \ \ \ \ \ \ \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00137}00137\ \ \ \ \ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_aa3ebd5d2169a91522a0692689b8bacf7}{log}}(me,\ (\textcolor{keyword}{const}\ uint8\_t*)\ \textcolor{stringliteral}{"{}ActiveObject\ not\ started\ (Windows)."{}},\ \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"{}ActiveObject\ not\ started\ (Windows)."{}}));}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00138}00138\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00139}00139\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00140}00140\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00141}00141\ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a0f1c4f70fecfb7a5cd1fe88e58dff41c}{msg\_queue\_id}}\ !=\ NULL\ \&\&\ me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}}\ ==\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00142}00142\ \ \ \ \ \ \ \ \ xTaskCreate(event\_loop,\ me-\/>\mbox{\hyperlink{structbase__obj_abc1e86d7c344fe34ff09e72d4595ab7e}{name}},\ 512,\ me,\ tskIDLE\_PRIORITY\ +\ 1,\ \&me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00143}00143\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}}\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00144}00144\ \ \ \ \ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_aa3ebd5d2169a91522a0692689b8bacf7}{log}}(me,\ (\textcolor{keyword}{const}\ uint8\_t*)\ \textcolor{stringliteral}{"{}ActiveObject\ started\ (FreeRTOS)."{}},\ \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"{}ActiveObject\ started\ (FreeRTOS)."{}}));}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00145}00145\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{active__object_8c_a2f0d7ad21b106241182fcb1824cda99d}{register\_active\_object}}(me);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00146}00146\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{fsm_8h_ab8e7b0b29808e166841510b1b92759d7}{fsm\_init}}(\&me-\/>\mbox{\hyperlink{structbase__obj_a95c9ad9a4bace3f923fec123c2ddd5d9}{fsm}},\ me-\/>\mbox{\hyperlink{structbase__obj_a9be6e5364e6fecb537346682b5bdae3d}{initialisation\_state}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00147}00147\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00148}00148\ \ \ \ \ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_aa3ebd5d2169a91522a0692689b8bacf7}{log}}(me,\ (\textcolor{keyword}{const}\ uint8\_t*)\ \textcolor{stringliteral}{"{}ActiveObject\ not\ started\ (FreeRTOS)."{}},\ \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"{}ActiveObject\ not\ started\ (FreeRTOS)."{}}));}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00149}00149\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00150}00150\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00151}00151\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00152}00152\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00153}00153\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00161}\mbox{\hyperlink{active__object_8h_abcc568f66a77cf2dc0cb3192a66503bf}{00161}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{active__object_8c_abcc568f66a77cf2dc0cb3192a66503bf}{stop}}(\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *\textcolor{keyword}{const}\ me)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00162}00162\ \ \ \ \ \mbox{\hyperlink{active__object_8c_af85b0d5d2f6c72f0bb35680400161277}{unregister\_active\_object}}(me);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00163}00163\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00164}00164\ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00165}00165\ \ \ \ \ \ \ \ \ TerminateThread(me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}},\ 0);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00166}00166\ \ \ \ \ \ \ \ \ CloseHandle(me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00167}00167\ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00168}00168\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00169}00169\ \ \ \ \ DeleteCriticalSection(\&me-\/>msgQueue.lock);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00170}00170\ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>logger(me,\ (\textcolor{keyword}{const}\ uint8\_t*)\textcolor{stringliteral}{"{}ActiveObject\ stopped."{}},\textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"{}ActiveObject\ stopped."{}}));}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00171}00171\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00172}00172\ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00173}00173\ \ \ \ \ \ \ \ \ vTaskDelete(me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00174}00174\ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00175}00175\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00176}00176\ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a0f1c4f70fecfb7a5cd1fe88e58dff41c}{msg\_queue\_id}})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00177}00177\ \ \ \ \ \ \ \ \ vQueueDelete(me-\/>\mbox{\hyperlink{structbase__obj_a0f1c4f70fecfb7a5cd1fe88e58dff41c}{msg\_queue\_id}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00178}00178\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00179}00179\ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_aa3ebd5d2169a91522a0692689b8bacf7}{log}}(me,\ (\textcolor{keyword}{const}\ uint8\_t*)\ \textcolor{stringliteral}{"{}ActiveObject\ stopped\ (FreeRTOS)."{}},\ \textcolor{keyword}{sizeof}(\textcolor{stringliteral}{"{}ActiveObject\ stopped\ (FreeRTOS)."{}}));}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00180}00180\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00181}00181\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00182}00182\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00191}\mbox{\hyperlink{active__object_8h_ad899678bdc83ea48740722b90d5cc42c}{00191}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{active__object_8c_ad899678bdc83ea48740722b90d5cc42c}{post}}(\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *\textcolor{keyword}{const}\ me,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmessage__frame__t}{message\_frame\_t}}\ frame)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00192}00192\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00193}00193\ \ \ \ \ MsgQueue\_Push(\&me-\/>msgQueue,\ \&frame);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00194}00194\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00195}00195\ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a0f1c4f70fecfb7a5cd1fe88e58dff41c}{msg\_queue\_id}})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00196}00196\ \ \ \ \ \ \ \ \ xQueueSend(me-\/>\mbox{\hyperlink{structbase__obj_a0f1c4f70fecfb7a5cd1fe88e58dff41c}{msg\_queue\_id}},\ \&frame,\ portMAX\_DELAY);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00197}00197\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00198}00198\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00199}00199\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00200}00200\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00206}00206\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ dispatch(\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *\textcolor{keyword}{const}\ me,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{structmessage__frame__t}{message\_frame\_t}}\ *frame)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00207}00207\ \ \ \ \ (void)\ me;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00208}00208\ \ \ \ \ (void)\ frame;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00209}00209\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00210}00210\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00220}\mbox{\hyperlink{active__object_8h_a8eb9cd4d643dd84ad2e46681885b6320}{00220}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{active__object_8c_a8eb9cd4d643dd84ad2e46681885b6320}{logger}}(\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *\textcolor{keyword}{const}\ me,\ \textcolor{keyword}{const}\ uint8\_t\ *data,\ uint16\_t\ length)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00221}00221\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00222}00222\ \ \ \ \ FILE\ *logFile\ =\ fopen(\textcolor{stringliteral}{"{}ActiveObject.log"{}},\ \textcolor{stringliteral}{"{}a"{}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00223}00223\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (logFile)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00224}00224\ \ \ \ \ \ \ \ \ \ \ \ \ fprintf(logFile,\ \textcolor{stringliteral}{"{}\%s\ :\ ["{}},\ me-\/>\mbox{\hyperlink{structbase__obj_abc1e86d7c344fe34ff09e72d4595ab7e}{name}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00225}00225\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (data\ \&\&\ length\ >\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00226}00226\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (uint16\_t\ i\ =\ 0;\ i\ <\ length;\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00227}00227\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fprintf(logFile,\ \textcolor{stringliteral}{"{}0x\%02X"{}},\ data[i]);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00228}00228\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ <\ length\ -\/\ 1)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00229}00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ fprintf(logFile,\ \textcolor{stringliteral}{"{},"{}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00230}00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00231}00231\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00232}00232\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00233}00233\ \ \ \ \ \ \ \ \ \ \ \ \ fprintf(logFile,\ \textcolor{stringliteral}{"{}]\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00234}00234\ \ \ \ \ \ \ \ \ \ \ \ \ fclose(logFile);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00235}00235\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00236}00236\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00237}00237\ \ \ \ \ \textcolor{comment}{/*\ Placeholder\ for\ eMMC\ logging\ */}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00238}00238\ \ \ \ \ \textcolor{comment}{//\ eMMC\_WriteLog(me-\/>name,\ message);}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00239}00239\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00240}00240\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00241}00241\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00251}\mbox{\hyperlink{active__object_8h_a315c2e3300e0f5228323f124986cd139}{00251}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{active__object_8c_a315c2e3300e0f5228323f124986cd139}{ao\_ctor}}(\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *\textcolor{keyword}{const}\ me,\ \mbox{\hyperlink{active__object_8h_acf503bbd3e9a97c6f2753e916c71b076}{broker\_t}}\ *\mbox{\hyperlink{structbroker}{broker}},\ \textcolor{keywordtype}{char}\ *name)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00252}00252\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \mbox{\hyperlink{active__object_8h_a419d688054455bbdc5df45b516db06cb}{base\_vtable\_t}}\ vtable\ =\ \{\ \&\mbox{\hyperlink{active__object_8h_a7cf400255ee0a4c9d0edd6f43896540d}{start}},}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00253}00253\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{active__object_8h_abcc568f66a77cf2dc0cb3192a66503bf}{stop}},}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00254}00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{active__object_8h_ad899678bdc83ea48740722b90d5cc42c}{post}},}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00255}00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&dispatch,}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00256}00256\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \&\mbox{\hyperlink{active__object_8h_a8eb9cd4d643dd84ad2e46681885b6320}{logger}}\ \};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00257}00257\ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}\ =\ \&vtable;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00258}00258\ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a5a3a47f6be5a195a6d4287100f06edb6}{broker}}\ =\ \mbox{\hyperlink{structbroker}{broker}};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00259}00259\ \ \ \ \ strncpy(me-\/>\mbox{\hyperlink{structbase__obj_abc1e86d7c344fe34ff09e72d4595ab7e}{name}},\ name,\ \textcolor{keyword}{sizeof}(me-\/>\mbox{\hyperlink{structbase__obj_abc1e86d7c344fe34ff09e72d4595ab7e}{name}})\ -\/\ 1);}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00260}00260\ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_abc1e86d7c344fe34ff09e72d4595ab7e}{name}}[\textcolor{keyword}{sizeof}(me-\/>\mbox{\hyperlink{structbase__obj_abc1e86d7c344fe34ff09e72d4595ab7e}{name}})\ -\/\ 1]\ =\ \textcolor{charliteral}{'\(\backslash\)0'};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00261}00261\ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a8037a396ecc1f2fd9dd7d4ccded016bd}{thread\_id}}\ =\ NULL;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00262}00262\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00263}00263\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00275}\mbox{\hyperlink{active__object_8h_a2f0d7ad21b106241182fcb1824cda99d}{00275}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{active__object_8c_a2f0d7ad21b106241182fcb1824cda99d}{register\_active\_object}}(\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *me)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00276}00276\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{active__object_8h_a27617dac518332ca9befb10109cc9f73}{active\_object\_count}}\ <\ \mbox{\hyperlink{active__object_8h_a699db742ab46a26bb83b45472601c812}{MAX\_ACTIVE\_OBJECTS}})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00277}00277\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{active__object_8h_adb2e90ee62e04d64222fb9d92b68425a}{active\_objects}}[\mbox{\hyperlink{active__object_8h_a27617dac518332ca9befb10109cc9f73}{active\_object\_count}}++]\ =\ me;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00278}00278\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00279}00279\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00280}00280\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Error:\ Maximum\ number\ of\ ActiveObjects\ reached.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00281}00281\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00282}00282\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00283}00283\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00284}00284\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00296}\mbox{\hyperlink{active__object_8h_af85b0d5d2f6c72f0bb35680400161277}{00296}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{active__object_8c_af85b0d5d2f6c72f0bb35680400161277}{unregister\_active\_object}}(\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *me)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00297}00297\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{active__object_8h_a27617dac518332ca9befb10109cc9f73}{active\_object\_count}};\ i++)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00298}00298\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{active__object_8h_adb2e90ee62e04d64222fb9d92b68425a}{active\_objects}}[i]\ ==\ me)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00299}00299\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{active__object_8h_adb2e90ee62e04d64222fb9d92b68425a}{active\_objects}}[i]\ =\ NULL;\ \ \textcolor{comment}{//\ Replace\ with\ last\ entry}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00300}00300\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{active__object_8h_a27617dac518332ca9befb10109cc9f73}{active\_object\_count}}-\/-\/;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00301}00301\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00302}00302\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00303}00303\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00304}00304\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00305}00305\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00306}00306\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}\textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00317}00317\ \textcolor{keywordtype}{unsigned}\ \_\_stdcall\ event\_loop(\textcolor{keywordtype}{void}\ *vparam)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00318}00318\ \ \ \ \ \mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *me\ =\ (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}*)\ vparam;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00319}00319\ \ \ \ \ \mbox{\hyperlink{structmessage__frame__t}{message\_frame\_t}}\ \mbox{\hyperlink{structevent}{event}};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00320}00320\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00321}00321\ \ \ \ \ \textcolor{keywordflow}{while}\ (1)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00322}00322\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (MsgQueue\_Pop(\&me-\/>msgQueue,\ \&\mbox{\hyperlink{structevent}{event}}))\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00323}00323\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}\ \&\&\ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_af88e40437eb1451ea7aa7a8ae17d6d13}{dispatch}})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00324}00324\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_af88e40437eb1451ea7aa7a8ae17d6d13}{dispatch}}(me,\ \&\mbox{\hyperlink{structevent}{event}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00325}00325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memset(\&\mbox{\hyperlink{structevent}{event}},\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmessage__frame__t}{message\_frame\_t}}));}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00326}00326\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00327}00327\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00328}00328\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00329}00329\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00330}00330\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00331}00331\ \textcolor{preprocessor}{\#else}\textcolor{preprocessor}{}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00341}00341\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ event\_loop(\textcolor{keywordtype}{void}\ *vparam)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00342}00342\ \ \ \ \ \mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}\ *me\ =\ (\mbox{\hyperlink{active__object_8h_ae666e05601080a7e76aa12feef53d049}{base\_obj\_t}}*)\ vparam;}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00343}00343\ \ \ \ \ \mbox{\hyperlink{structmessage__frame__t}{message\_frame\_t}}\ \mbox{\hyperlink{structevent}{event}};}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00344}00344\ \ \ \ \ \textcolor{keywordflow}{if}\ (me\ !=\ NULL)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00345}00345\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (1)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00346}00346\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (xQueueReceive(me-\/>\mbox{\hyperlink{structbase__obj_a0f1c4f70fecfb7a5cd1fe88e58dff41c}{msg\_queue\_id}},\ \&\mbox{\hyperlink{structevent}{event}},\ portMAX\_DELAY)\ ==\ pdTRUE)\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00347}00347\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}\ \&\&\ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_af88e40437eb1451ea7aa7a8ae17d6d13}{dispatch}})\ \{}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00348}00348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ me-\/>\mbox{\hyperlink{structbase__obj_a1ed87b5169929bab505a60576c4742a8}{vptr}}-\/>\mbox{\hyperlink{structbase__vtable_af88e40437eb1451ea7aa7a8ae17d6d13}{dispatch}}(me,\ \&\mbox{\hyperlink{structevent}{event}});}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00349}00349\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ memset(\&\mbox{\hyperlink{structevent}{event}},\ 0,\ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structmessage__frame__t}{message\_frame\_t}}));}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00350}00350\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00351}00351\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00352}00352\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00353}00353\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00354}00354\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00355}00355\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00356}00356\ }
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00357}00357\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00358}00358\ \}}
\DoxyCodeLine{\Hypertarget{active__object_8c_source_l00359}00359\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
